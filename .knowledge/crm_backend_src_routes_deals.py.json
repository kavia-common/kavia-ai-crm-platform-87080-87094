{"is_source_file": true, "format": "Python", "description": "This file defines REST API endpoints for managing 'deals' in a CRM platform, including listing, creating, retrieving, updating, deleting, and forecasting deals using FastAPI framework.", "external_files": ["src/db/session.py", "src.schemas.deals.py", "src.services.deals.py"], "external_methods": ["get_session", "deal_service.list", "deal_service.create", "deal_service.get", "deal_service.update", "deal_service.delete", "deal_service.amount_forecast"], "published": ["list_deals", "create_deal", "get_deal", "update_deal", "delete_deal", "forecast"], "classes": [], "methods": [{"name": "list_deals(page: int = Query(1, ge=1), size: int = Query(20, ge=1, le=100))", "description": "Endpoint to list deals with pagination, returning a list of deal summaries.", "scope": "", "scopeKind": ""}, {"name": "create_deal(payload: DealCreate)", "description": "Endpoint to create a new deal with provided data.", "scope": "", "scopeKind": ""}, {"name": "get_deal(deal_id: int)", "description": "Retrieve a specific deal by ID.", "scope": "", "scopeKind": ""}, {"name": "update_deal(deal_id: int, payload: DealUpdate)", "description": "Update fields of an existing deal by ID.", "scope": "", "scopeKind": ""}, {"name": "delete_deal(deal_id: int)", "description": "Delete a deal by ID.", "scope": "", "scopeKind": ""}, {"name": "forecast(pipeline_id: Optional[int] = Query(None, description=\"Filter by pipeline ID\"))", "description": "Return a forecasted weighted revenue for deals, optionally filtered by pipeline ID.", "scope": "", "scopeKind": ""}], "calls": ["get_session()", "deal_service.list()", "deal_service.create()", "deal_service.get()", "deal_service.update()", "deal_service.delete()", "deal_service.amount_forecast()"], "search-terms": ["FastAPI deals endpoints", "deal CRUD", "deal forecast", "deal_service", "src.schemas.deals", "src.db.session"], "state": 2, "file_id": 20, "knowledge_revision": 42, "git_revision": "", "ctags": [{"_type": "tag", "name": "create_deal", "path": "/home/kavia/workspace/code-generation/kavia-ai-crm-platform-87080-87094/crm_backend/src/routes/deals.py", "pattern": "/^def create_deal(payload: DealCreate):$/", "language": "Python", "kind": "function", "signature": "(payload: DealCreate)"}, {"_type": "tag", "name": "delete_deal", "path": "/home/kavia/workspace/code-generation/kavia-ai-crm-platform-87080-87094/crm_backend/src/routes/deals.py", "pattern": "/^def delete_deal(deal_id: int):$/", "language": "Python", "kind": "function", "signature": "(deal_id: int)"}, {"_type": "tag", "name": "forecast", "path": "/home/kavia/workspace/code-generation/kavia-ai-crm-platform-87080-87094/crm_backend/src/routes/deals.py", "pattern": "/^def forecast(pipeline_id: Optional[int] = Query(None, description=\"Filter by pipeline ID\")):$/", "language": "Python", "kind": "function", "signature": "(pipeline_id: Optional[int] = Query(None, description=\"Filter by pipeline ID\"))"}, {"_type": "tag", "name": "get_deal", "path": "/home/kavia/workspace/code-generation/kavia-ai-crm-platform-87080-87094/crm_backend/src/routes/deals.py", "pattern": "/^def get_deal(deal_id: int):$/", "language": "Python", "kind": "function", "signature": "(deal_id: int)"}, {"_type": "tag", "name": "list_deals", "path": "/home/kavia/workspace/code-generation/kavia-ai-crm-platform-87080-87094/crm_backend/src/routes/deals.py", "pattern": "/^def list_deals(page: int = Query(1, ge=1), size: int = Query(20, ge=1, le=100)):$/", "language": "Python", "kind": "function", "signature": "(page: int = Query(1, ge=1), size: int = Query(20, ge=1, le=100))"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/kavia-ai-crm-platform-87080-87094/crm_backend/src/routes/deals.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_deal", "path": "/home/kavia/workspace/code-generation/kavia-ai-crm-platform-87080-87094/crm_backend/src/routes/deals.py", "pattern": "/^def update_deal(deal_id: int, payload: DealUpdate):$/", "language": "Python", "kind": "function", "signature": "(deal_id: int, payload: DealUpdate)"}], "hash": "7bc48ed16949af9c7cde0df0d90a6912", "format-version": 4, "code-base-name": "crm_backend", "filename": "crm_backend/src/routes/deals.py", "fields": [{"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"42": ""}]}